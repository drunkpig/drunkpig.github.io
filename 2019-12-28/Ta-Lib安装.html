<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Ta-Lib安装</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/code_hilighting.css" type="text/css" media="screen"
          charset="utf-8">
    <link rel="stylesheet" href="../css/simple.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="../css/pages.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="../css/mytheme.css" type="text/css" media="screen" charset="utf-8">

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$']]
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ccd0a4c5305cc998d59f5c06a24a2b93";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
<body>


<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="article_title">Ta-Lib安装</h1>
            <div class="tags_container">
                
                <span>标签：</span>
                
                <a class="tag" href="../tags/tag_量化.html">量化</a>
                
                
            </div>
        </div>


    </div>
    <div class="row">
        <div class="post_content col-lg-10 col-md-10 col-xs-10 col-md-10">
            <div class="toc">
<ul>
<li><a href="#ta-lib">Ta-Lib安装</a><ul>
<li><a href="#windows">windows上安装步骤</a></li>
<li><a href="#linxu">linxu上安装步骤</a></li>
<li><a href="#faq">FAQ</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="ta-lib">Ta-Lib安装</h2>
<p>Ta-Lib网站 <a href="http://ta-lib.org/">http://ta-lib.org/</a></p>
<h3 id="windows">windows上安装步骤</h3>
<p>windows上如果直接执行pip install Ta-Lib是不会成功的，还要求你有VS的编译环境。</p>
<p>因此wind上安装一般直接下载别人编译好的，在这里 <a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a></p>
<p>我是win10 64位, python3.6,那么就下载  TA_Lib‑0.4.17‑cp36‑cp36m‑win_amd64.whl。</p>
<p>下载之后用pip安装：<code>$pip install Ta_Lib-xxxx.whl</code></p>
<hr />
<p>遇到错</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">talib</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;__init__.pxd&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">998</span><span class="p">,</span> <span class="ow">in</span> <span class="n">numpy</span><span class="o">.</span><span class="n">import_array</span>
<span class="ne">RuntimeError</span><span class="p">:</span> <span class="n">module</span> <span class="n">compiled</span> <span class="n">against</span> <span class="n">API</span> <span class="n">version</span> <span class="mh">0xb</span> <span class="n">but</span> <span class="n">this</span> <span class="n">version</span> <span class="n">of</span> <span class="n">numpy</span> <span class="ow">is</span> <span class="mh">0xa</span>

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;E:\dev\Python\Python35\lib\site-packages</span><span class="se">\t</span><span class="s2">alib\__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">43</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">from</span> <span class="nn">._ta_lib</span> <span class="kn">import</span> <span class="p">(</span>
  <span class="n">File</span> <span class="s2">&quot;_func.pxi&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">15</span><span class="p">,</span> <span class="ow">in</span> <span class="n">init</span> <span class="n">talib</span><span class="o">.</span><span class="n">_ta_lib</span>
  <span class="n">File</span> <span class="s2">&quot;__init__.pxd&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1000</span><span class="p">,</span> <span class="ow">in</span> <span class="n">numpy</span><span class="o">.</span><span class="n">import_array</span>
<span class="ne">ImportError</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">multiarray</span> <span class="n">failed</span> <span class="n">to</span> <span class="kn">import</span>
</code></pre></div>


<p>说明numpy版本不兼容，需要升级一下： <code>$pip install -U numpy</code>。其他问题类似解决。</p>
<h3 id="linxu">linxu上安装步骤</h3>
<ol>
<li>下载源码 <a href="http://ta-lib.org/hdr_dw.html">http://ta-lib.org/hdr_dw.html</a>  选unix/linux版本的，就是表中最后一个</li>
<li>解压后进入源码目录执行    <code>$./configure</code></li>
<li>执行 <code>$make</code></li>
<li>执行 <code>$sudo make install</code></li>
<li>编辑 /etc/ld.so.conf ， 在末尾加入 <code>/usr/local/lib</code> 这个目录也就是make install安装的Ta-Lib的库文件的目录</li>
<li>执行 <code>$sudo ldconfig</code></li>
<li>安装python的 ta-lib 包装  <code>$pip install Ta-Lib</code></li>
</ol>
<h3 id="faq">FAQ</h3>
<ol>
<li>在使用过程中发现比如RSI计算结果和同花顺差距比较大，也没有同花顺那么准确，这是因为一些函数比如均值计算在TA-LIB和同花顺中不一样</li>
<li>TA-LIB貌似不能迭代计算，每次塞进去一大堆，有的迭代次数太少会导致精度下降，塞的太多消耗CPU</li>
<li>看着同花顺上的指标公式，其实实现也没那么难！而且回测调试对我等业余小散选手来说，看着同花顺做下对比挺好。</li>
</ol>

        </div>
        <div class="mytoc col-lg-2 col-md-2 col-xs-2 col-md-2">
            <span class="toc_title">目录</span>
            <div class="toc">
<ul>
<li><a href="#ta-lib">Ta-Lib安装</a><ul>
<li><a href="#windows">windows上安装步骤</a></li>
<li><a href="#linxu">linxu上安装步骤</a></li>
<li><a href="#faq">FAQ</a></li>
</ul>
</li>
</ul>
</div>

        </div>
    </div>
</div>





<div class="container">
    <div class="row text-center">
	build:&nbsp;&nbsp; <a target='_blank' href='https://travis-ci.com/drunkpig/drunkpig.github.io'>2020-08-06 00:00:57</a>
	
	</div>
</div>

</body>
</html>